!function(e){jQuery.browser={},jQuery.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),jQuery.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var i=this.length>>>0,t=Number(arguments[1])||0;for(t=0>t?Math.ceil(t):Math.floor(t),0>t&&(t+=i);i>t;t++)if(t in this&&this[t]===e)return t;return-1});var i=[],t=0,r=!1,n="",o="",a="",s="",g=0,d=0,u={onComplete:function(){},backgroundColor:"#000",barColor:"#fff",overlayId:"qLoverlay",barHeight:1,percentage:!1,deepSearch:!0,completeAnimation:"fade",minimumTime:500,onLoadComplete:function(){if("grow"==u.completeAnimation){var i=500,t=new Date;t.getTime()-d<u.minimumTime&&(i=u.minimumTime-(t.getTime()-d)),e(a).stop().animate({width:"100%"},i,function(){e(this).animate({top:"0%",width:"100%",height:"100%"},500,function(){e("#"+u.overlayId).fadeOut(500,function(){e(this).remove(),u.onComplete()})})})}else e("#"+u.overlayId).fadeOut(500,function(){e("#"+u.overlayId).remove(),u.onComplete()})}},h=function(){var e=new Date;d=e.getTime(),i.length>0?(c(),f()):l()},c=function(){n=e("<div></div>").appendTo("body").css({display:"none",width:0,height:0,overflow:"hidden"});for(var t=0;i.length>t;t++)e.ajax({url:i[t],type:"HEAD",complete:function(e){r||(g++,p(this.url))}})},p=function(i){e("<img />").attr("src",i).bind("load error",function(){v()}).appendTo(n)},v=function(){t++;var i=t/g*100;e(a).stop().animate({width:i+"%",minWidth:i+"%"},200),1==u.percentage&&e(s).text(Math.ceil(i)+"%"),t==g&&l()},l=function(){e(n).remove(),u.onLoadComplete(),r=!0},f=function(){o=e("<div id='"+u.overlayId+"'></div>").css({width:"100%",height:"100%",backgroundColor:u.backgroundColor,backgroundPosition:"fixed",position:"fixed",zIndex:666999,top:0,left:0}).appendTo("body"),a=e("<div id='qLbar'></div>").css({height:u.barHeight+"px",marginTop:"-"+u.barHeight/2+"px",backgroundColor:u.barColor,width:"0%",position:"absolute",top:"50%"}).appendTo(o),1==u.percentage&&(s=e("<div id='qLpercentage'></div>").text("0%").css({height:"40px",width:"100px",position:"absolute",fontSize:"3em",top:"50%",left:"50%",marginTop:"-"+(59+u.barHeight)+"px",textAlign:"center",marginLeft:"-50px",color:u.barColor}).appendTo(o)),i.length||l()},m=function(t){var r="";if("none"!=e(t).css("background-image"))var r=e(t).css("background-image");else if("undefined"!=typeof e(t).attr("src")&&"img"==t.nodeName.toLowerCase())var r=e(t).attr("src");if(-1==r.indexOf("gradient")){r=r.replace(/url\(\"/g,""),r=r.replace(/url\(/g,""),r=r.replace(/\"\)/g,""),r=r.replace(/\)/g,"");for(var n=r.split(", "),o=0;o<n.length;o++)if(n[o].length>0&&-1==i.indexOf(n[o])){var a="";e.browser.msie&&e.browser.version<9&&(a="?"+Math.floor(3e3*Math.random())),i.push(n[o]+a)}}};e.fn.queryLoader2=function(i){return i&&e.extend(u,i),this.each(function(){m(this),1==u.deepSearch&&e(this).find("*:not(script)").each(function(){m(this)})}),h(),this};var b={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var i=0;i<e.length;i++){var t=e[i].string,r=e[i].prop;if(this.versionSearchString=e[i].versionSearch||e[i].identity,t){if(-1!=t.indexOf(e[i].subString))return e[i].identity}else if(r)return e[i].identity}},searchVersion:function(e){var i=e.indexOf(this.versionSearchString);if(-1!=i)return parseFloat(e.substring(i+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};b.init(),jQuery.browser.version=b.version}(jQuery);
